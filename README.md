# 🌳 浏览脉络追踪器

一个Chrome浏览器扩展，用于记录和可视化网页之间的跳转关系，帮助你轻松回溯浏览路径。

## 功能特点

- 🌲 **树形结构展示**：以树状图形式展示你的浏览跳转路径
- 📝 **多会话管理**：支持多个独立的浏览会话，方便区分不同的浏览任务
- 🔄 **实时追踪**：自动记录页面跳转关系，无需手动操作
- 🎯 **智能合并**：相同URL自动合并，显示访问次数
- 📊 **会话统计**：查看每个会话的页面数量和起点数量
- 🔍 **展开/折叠**：自由控制树形结构的展示层级
- 🎨 **精美界面**：现代化UI设计，支持深色/浅色主题

## 安装方法

### 开发者模式安装

1. 下载或克隆本仓库到本地
2. 打开Chrome浏览器，进入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本项目的根目录
6. 安装成功后，浏览器工具栏会出现扩展图标

### 打包安装（可选）

如果你想打包成 `.crx` 文件分发：

1. 进入 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"打包扩展程序"
4. 选择项目目录并打包

## 使用方法

### 基本使用

1. **开始浏览**：安装扩展后，正常浏览网页即可，扩展会自动记录你的跳转路径
2. **查看脉络**：点击浏览器工具栏的扩展图标，即可看到当前的浏览树形图
3. **切换会话**：在顶部的下拉菜单中可以切换不同的浏览会话
4. **新建会话**：点击 `➕` 按钮可以创建新的浏览会话

### 界面说明

- **顶部栏**：显示当前会话名称，刷新、新建会话、设置按钮
- **会话选择器**：切换不同的浏览会话
- **统计栏**：显示当前会话的基本统计信息
- **树形区域**：展示浏览路径的树形图
  - ▼/▶ 展开或折叠子节点
  - 点击节点可以在新标签页打开对应链接
  - 悬停显示复制和打开按钮
- **底部栏**：清空所有、全部展开、全部折叠按钮

### 设置选项

点击 `⚙️` 设置按钮可以配置：

- **最大保存会话数**：自动清理旧会话的阈值
- **自动清理旧会话**：开启后自动删除超出数量的旧会话
- **显示网站图标**：是否在树形图中显示网站favicon
- **树形结构默认展开**：新加载的树是否默认全部展开

## 工作原理

1. **页面追踪**：通过Chrome扩展API监听标签页更新和页面跳转
2. **关系构建**：识别页面之间的跳转关系，构建父子节点关系
3. **树形存储**：使用树形数据结构存储浏览历史
4. **数据持久化**：使用Chrome Storage API保存数据

### 数据存储说明

- 所有数据存储在本地浏览器中，不会上传到任何服务器
- 支持多会话管理，方便区分不同的浏览任务
- 自动清理机制防止存储空间无限增长

## 使用场景

### 深度阅读
当你在知乎、维基百科等网站进行深度阅读时：
- 从文章A点击链接到文章B
- 从文章B跳转到文章C
- 通过浏览脉络轻松回到文章A

### 技术研究
当你查找技术资料时：
- 从搜索引擎结果页跳转到各种文档
- 在多个GitHub仓库之间切换
- 清晰看到信息获取的路径

### 购物比价
当你在不同电商平台比价时：
- 记录每个商品的来源路径
- 方便回溯和比较

## 文件结构

```
browse-tree-tracker/
├── manifest.json      # 扩展配置文件
├── background.js      # 后台服务脚本（核心逻辑）
├── popup.html         # 弹出窗口HTML
├── popup.css          # 弹出窗口样式
├── popup.js           # 弹出窗口脚本
├── icons/             # 扩展图标
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md          # 说明文档
```

## 权限说明

本扩展需要以下权限：

- `tabs`：读取标签页信息
- `storage`：本地存储浏览历史
- `webNavigation`：监听页面跳转
- `activeTab`：获取当前标签页信息
- `<all_urls>`：监听所有URL的跳转（仅在本地处理，不上传）

**隐私声明**：所有数据仅在本地处理，不会上传或分享给任何第三方。

## 常见问题

### Q: 为什么有些页面没有被记录？
A: 以下类型的页面不会被记录：
- Chrome内部页面（chrome://）
- 扩展页面（chrome-extension://）
- 开发者工具（devtools://）
- 本地文件（file://）

### Q: 如何删除单个会话？
A: 在会话选择器右侧点击 `🗑️` 按钮即可删除当前选中的会话。

### Q: 数据会保存多久？
A: 数据会一直保存在浏览器本地，除非你：
- 手动删除会话
- 清空所有数据
- 卸载扩展
- 开启自动清理且超出最大会话数

### Q: 支持同步吗？
A: 当前版本数据仅保存在本地，不支持跨设备同步。

## 开发计划

- [ ] 支持数据导出/导入
- [ ] 添加搜索功能
- [ ] 支持图表可视化（除树形外的其他布局）
- [ ] 添加时间线视图
- [ ] 支持快捷键操作
- [ ] 添加笔记功能

## 技术栈

- Chrome Extension Manifest V3
- JavaScript (ES6+)
- Chrome Storage API
- Chrome Tabs API
- Chrome WebNavigation API

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request！

## 作者

Created with ❤️ for better browsing experience.

---

如果这个项目对你有帮助，欢迎给个Star ⭐️
